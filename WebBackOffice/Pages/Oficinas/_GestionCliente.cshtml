@using WebBackOffice.ViewModels.Oficinas
@model GestionClienteVM
@Html.AntiForgeryToken()
<h5 class="text-center mb-4">Registro de Gestión Cliente</h5>

@if (!string.IsNullOrEmpty(Model.CanalContacto))
{
    <div class="badge bg-secondary mb-3">
        @Model.CanalContacto
    </div>
}

<div class="row g-3 mb-3">
    <input type="hidden" id="gestionId" value="@Model.Id" name="Id" />
    <div class="col-md-6">
        <label class="form-label text-primary">DOCUMENTO</label>
        <input class="form-control" value="@Model.Documento" disabled />
    </div>

    <div class="col-md-6">
        <label class="form-label text-primary">CELULAR</label>
        <input class="form-control" value="@Model.Celular" disabled />
    </div>

    <div class="col-md-12">
        <label class="form-label text-primary">AGRUPACIÓN</label>
       @*  <select id="estado" class="form-select" asp-for="Estado" name="Estado">
            <option value="1">Sin Gestión</option>
            <option value="2">Interesado</option>
            <option value="3">No Interesado</option>
            <option value="4">En Seguimiento</option>
            <option value="5">Observado</option>
            <option value="6">Rechazado</option>
            <option value="7">No Contactable</option>
            <option value="8">Aprobado</option>
        </select> *@
        <select class="form-select" id="estado" name="Estado">
            <option selected="@("Sin Gestión" == Model.Estado)">Sin Gestión</option>
            <option selected="@("Interesado" == Model.Estado)">Interesado</option>
            <option selected="@("No Interesado" == Model.Estado)">No Interesado</option>
            <option selected="@("En Seguimiento" == Model.Estado)">En Seguimiento</option>
            <option selected="@("Observado" == Model.Estado)">Observado</option>
            <option selected="@("Rechazado" == Model.Estado)">Rechazado</option>
            <option selected="@("No Contactable" == Model.Estado)">No Contactable</option>
            <option selected="@("Aprobado" == Model.Estado)">Aprobado</option>
        </select>
    </div>

    <div class="col-md-12">
        <label class="form-label text-primary">COMENTARIOS</label>
     @*    <textarea id="comentarios" class="form-control"
                  rows="3"
                  asp-for="Comentarios"
                  name="Comentario"
                  placeholder="Comentarios"></textarea> *@
<textarea class="form-control"
          id="comentarios"
          name="Comentario"
          rows="3">@Model.Comentarios</textarea>
    </div>

</div>

<div class="text-center mb-4">
    <button class="btn btn-primary px-4" type="button" onclick="guardarGestion()">Guardar</button>
    <button class="btn btn-light px-4" data-bs-dismiss="modal">Cancel</button>
</div>

<hr />

<h6 class="fw-semibold mb-3">Simulaciones</h6>

<div class="table-responsive">
    <table class="table table-sm align-middle">
        <thead class="table-light">
            <tr>
                <th>MONEDA</th>
                <th>VALOR INMUEBLE</th>
                <th>MONTO INICIAL</th>
                <th>DINERO NECESITA</th>
                <th>INGRESO MENSUAL</th>
                <th>TIPO INGRESO</th>
                <th>COMPARTE CUOTA</th>
                <th>CONOCE INMUEBLE</th>
                <th>PRIMERA VIVIENDA</th>
            </tr>
        </thead>
        <tbody>
            @if (!Model.Simulaciones.Any())
            {
                <tr>
                    <td colspan="9" class="text-center text-muted">
                        Sin simulaciones
                    </td>
                </tr>
            }
            else
            {
                @foreach (var s in Model.Simulaciones)
                {
                    <tr>
                        <td>@s.Moneda</td>
                        <td>@s.ValorInmueble</td>
                        <td>@s.MontoInicial</td>
                        <td>@s.DineroNecesita</td>  
                        <td>@s.IngresoMensual</td>
                        <td>@s.TipoIngreso</td>
                        <td>@(s.ComparteCuota)</td>
                        <td>@(s.ConoceInmueble)</td>
                        <td>@(s.PrimeraVivienda)</td>
                    </tr>
                }
            }
        </tbody>
    </table>
</div>


