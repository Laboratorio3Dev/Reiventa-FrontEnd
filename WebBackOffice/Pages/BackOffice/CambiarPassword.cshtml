@page
@model WebBackOffice.Pages.BackOffice.CambiarPasswordModel

@{
    ViewData["Title"] = "Cambiar Contraseña";
}

<div class="d-flex justify-content-center mt-4">
    <div class="card shadow-lg p-4" style="max-width:480px;width:100%;border-radius:1rem;">

        <h4 class="fw-bold text-primary text-center mb-3">
            <i class="bi bi-shield-lock-fill me-2"></i>Cambiar Contraseña
        </h4>

        <form method="post">

            <!-- Password Actual -->
            <div class="mb-3">
                <label class="form-label">Contraseña Actual</label>
                <div class="input-group">
                    <input asp-for="Password.PasswordActual"
                           type="password"
                           class="form-control password-actual" />
                    <button type="button" class="btn btn-outline-secondary toggle">
                        <i class="fa-solid fa-eye"></i>
                    </button>
                </div>
                <span asp-validation-for="Password.PasswordActual" class="text-danger"></span>
            </div>

            <!-- Nueva Password -->
            <div class="mb-3">
                <label class="form-label">Nueva Contraseña</label>
                <div class="input-group">
                    <input asp-for="Password.PasswordNueva"
                           id="passwordNueva"
                           type="password"
                           class="form-control" />
                    <button type="button" class="btn btn-outline-secondary toggle">
                        <i class="fa-solid fa-eye"></i>
                    </button>
                </div>
                <span asp-validation-for="Password.PasswordNueva" class="text-danger"></span>
            </div>

            <!-- Reglas -->
            <ul class="list-unstyled small ms-1 mb-3" id="rules">
                <li data-rule="min">✘ Mínimo 8 caracteres</li>
                <li data-rule="mayus">✘ Una mayúscula</li>
                <li data-rule="minus">✘ Una minúscula</li>
                <li data-rule="num">✘ Un número</li>
                <li data-rule="esp">✘ Un carácter especial</li>
            </ul>

            <!-- Confirmación -->
            <div class="mb-3">
                <label class="form-label">Confirmar Contraseña</label>
                <div class="input-group">
                    <input asp-for="Password.PasswordConfirmacion"
                           type="password"
                           class="form-control" />
                    <button type="button" class="btn btn-outline-secondary toggle">
                        <i class="fa-solid fa-eye"></i>
                    </button>
                </div>
                <span asp-validation-for="Password.PasswordConfirmacion" class="text-danger"></span>
            </div>

            @if (!string.IsNullOrEmpty(Model.Mensaje))
            {
                <div class="alert @(Model.EsExito ? "alert-success" : "alert-danger") text-center">
                    @Model.Mensaje
                </div>
            }

            <button class="btn btn-primary w-100">
                <i class="fa-solid fa-floppy-disk me-1"></i> Guardar Cambios
            </button>
        </form>
    </div>
</div>
